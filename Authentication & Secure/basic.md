# **HTTPS**

> **HTTPS = HTTP + Secure Socket Layer**  
> **HTTP 요청을 SSL 또는 TLS 알고리즘을 이용해, 통신 과정에서 데이터를 암호화하여 전송하는 방법**

# **HTTPS의 사용 목적**

-   암호화
    -   제 3자가 서버와 클라이언트간에 오가는 정보를 탈취할 수 없도록 하는 목적
    -   HTTPS는 데이터를 암호화하여 전송하기 때문에, 중요한 데이터가 유출될 가능성이 HTTP보다 현저히 적다.
    -   HTTPS에서는 대칭키, 비대칭키 방식을 혼용한다.
-   인증서
    -   HTTPS 통신에서는 클라이언트(브라우저)가 서버의 응답과 함께 전달된 인증서를 확인할 수 있다.
    -   인증서는 서버의 신원을 보증하여, 접속한 도메인이 신뢰가능한 도메인임을 보장한다.
    -   이걸 보증 서주는 게 공인 기관인 Certificate Authority(CA)

# **Hashing**

-   암호화 기법의 일종
-   어떠한 문자열에 임의의 연산을 적용하여 다른 문자열로 변환하는 것
    -   모든 값에 대해 해시 값을 계산하는 데 오래 걸리지 않아야 한다
    -   해시 값들은 최대한 다른 해시 값을 피해야 하며, 모든 값은 고유한 해시 값을 가져야 한다.
    -   아주 작은 단위의 변경이라도 완전히 다른 해시 값을 가져야 한다.

## **Salt**

-   암호화해야 하는 값에 별도의 값을 추가하여 결과를 변형시키는 것

> **Why?**  
> **기존 값에 암호화만 한다면 해시된 결과가 늘 동일하므로, 해시된 값과 원래 값을 테이블로 만들어 decoding 해버리는 경우가 생긴다. 하지만 기존 값에 임의의 문자열을 추가하여 해시를 진행하면 전혀 다른 해시값이 반환되므로, 알고리즘이 노출되더라도 보호장치가 될 수 있다.**

-   Salt는 유저/패스워드 별로 유일한 값을 가져야 함
-   사용자 계정을 생성할 때와 비밀번호를 변경할 때 마다 새로운 임의의 Salt를 사용해야 한다.
-   Salt는 절대 재사용 금지
-   Salt는 DB의 유저 테이블에 같이 저장

# **Cookie**

-   서버에서 클라이언트에 데이터를 저장하는 방법 중 하나
-   HTTP의 특징(무상태성)을 보완하기 위해 사용
-   쿠키를 이용한다 = 서버에서 클라이언트에 쿠키 전송 + 클라이언트에서 서버로 쿠키 전송

-   쿠키 옵션 - 데이터를 저장한 이후 특정 조건들이 만족될 때 데이터를 가져올 수 있다.
    -   Domain : (google.com, naver.com, etc) -> 도메인이 일치할 때만 쿠키 전송 가능
    -   Path : 세부경로(~.com **/users/login** ) -> 세부 경로가 일치하는 경우에만 쿠키 전송 가능. 하위 경로가 더 있어도 전송가능
    -   MaxAge or Expires : 쿠키의 유효기간 설정. 전자는 "몇 초 동안" 후자는 "몇 일 까지"
        -   세션 쿠키 : MaxAge나 Expires 옵션이 없는 쿠키. 브라우저가 실행 중일 때 사용가능하며, 브라우저를 종료하면 해당 쿠키는 삭제된다.
        -   영속성 쿠키 : 브라우저의 종료 여부와 상관없이 MaxAge/Expires에 지정된 유효시간 만큼 사용 가능한 쿠키
    -   Secure : true로 설정하면, HTTPS 프로토콜을 이용해 통신할 경우에만 쿠키 전송 가능
    -   HttpOnly : ture로 설정하면, 자바스크립트에서는 쿠키에 접근 불가.(default : false)
    -   SameSite : Cross-Origin 요청 상황에서 전송여부를 결정하는데 작용
        -   Lax : Cross-Origin 요청이면 GET 메서드에 대해서만 쿠키 전송 가능
        -   Strict : Cross-Origin이 아닌 same-site 경우에만 쿠키 전송 가능
        -   None : 항상 쿠키 전송 가능. 단, 쿠키 옵션 중 Secure 옵션 필요(HTTPS 통신에서만 쿠키 전송)

> **site, origin 차이점**  
> origin : 똑같은 url인가? (https://www.google.com:포트번호) 까지 같아야 same origin(well-known 포트는 생략가능)site : 도메인(google.com) 이 동일한가? 도메인이 같으면 same-site

# **Session**

-   유저가 정확한 아이디/비밀번호를 입력했다면, 서버는 인증에 성공했다고 판단
-   하지만 이걸 기억하지 않으면, 유저가 매번 인증해야함
-   사용자가 인증에 성공한 상태 = 세션
-   세션이 만들어지면 각 세션을 구분할 수 있는 세션 아이디가 생성되는데, 클라이언트에게 세션 성공을 증명할 수단으로 세션 아이디를 전송
-   로그인을 유지하기 위한 수단으로 쿠키 사용(쿠키에 세션 아이디 저장)
-   로그아웃 : 서버는 세션 정보 삭제, 클라이언트는 쿠키 갱신
