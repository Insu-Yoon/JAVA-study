# **관계형 데이터베이스**

구조화된 데이터는 하나의 테이블로 표현할 수 있다. 사전에 정의된 테이블을 relation이라고도 부르기 때문에, 테이블을 사용하는 데이터베이스를 Relational DataBase(관계형 데이터베이스)라고 부른다.

-   데이터(data) : 각 항목에 저장되는 값
-   테이블(table) ( == relation) : 사전에 정의된 열의 데이터 타입대로 데이터가 행으로(수직적으로) 축적된다.
-   칼럼(column) (== field) : 테이블의 한 열을 가르킨다.
-   레코드(record) (== tuple) : 테이블의 한 행에 저장된 데이터
-   키(key) : 테이블의 각 레코드를 구분할 수 있는 값. 각 레코드마다 고유한 값을 가지며, 기본키(primary key)와 외래키(foreign key) 등이 있다.

# **관계 종류**

테이블과 테이블 사이의 관계에는 다음과 같은 종류가 있다.

-   1:1 관계
-   1:N 관계
-   N:M 관계
-   self referencing 관계

마지막의 self referencing은 테이블 간의 관계가 아니라, 테이블 스스로 갖는 관계이다.

## **1:1 관계**

하나의 레코드가 다른 테이블의 레코드 한 개와 연결된 경우. 

![image](https://user-images.githubusercontent.com/110891599/194301185-cb0a9870-560a-48a3-bf57-d3a884e96816.png)


사실 1:1 관계의 경우, 한쪽 테이블에 fk 대신 해당 값 자체를 저장하는 게 더 나을 수 있다. 그래서 자주 사용하진 않는다.

## **1:N 관계**

하나의 레코드가 서로 다른 여러 개의 레코드와 연결된 경우.

![image](https://user-images.githubusercontent.com/110891599/194301222-1aca7caf-622c-45dc-9d7b-c948ddf3da1c.png)


이 구조에서는 한 명의 유저가 여러 개의 전화번호를 가질 수 있다. 하지만 여러명의 유저가 하나의 전화번호를 가질 수는 없다. 이러한 1:N 관계가 관계형 데이터베이스에서 가장 많이 사용된다.

## **N:M 관계**

여러 개의 레코드가 다른 테이블의 여러 개의 레코드와 관계가 있는 경우. 이러한 관계를 위해 스키마를 디자인할 경우, Join 테이블을 만들어 관리한다. 1:N 관계와 비슷하지만, 양방향에서 다수의 레코드를 가질 수 있다.

![image](https://user-images.githubusercontent.com/110891599/194301242-7409281d-0665-47db-965c-05ce079d0beb.png)

고객 한 명이 여러개의 여행 상품을 가질 수 있고, 여행 상품 하나가 여러 명의 고객을 가질 수 있다.

customer\_package 테이블은 customer\_id와 package\_id를 묶어주는 역할이다. 이 테이블을 통해 어떤 고객이 어떤 여행 상품을 몇 개 구매했는지, 또는 어떤 여행 상품이 어떤 고객을 몇 명 가지는지 확인할 수 있다. 이렇게 조인 테이블을 생성하더라도, 조인 테이블을 위한 키(cp\_id)는 있어야 한다.

## **자기참조 관계(Self Referencing Relationship)**

테이블 내에서도 관계가 필요할 수 있다. 예를 들어 추천인이 누구인지 파악하기 위해 사용할 수 있다.

![image](https://user-images.githubusercontent.com/110891599/194301267-7a1197bd-be5d-4ea2-b72c-9469c16f7c85.png)

recommend\_id는 user\_id와 연결되어 있다. 한 명의 유저는 단 한 명의 추천인 만을 가질 수 있다. 하지만 여러 명이 한 명의 유저를 추천인으로 등록할 수 있다. 이 관계는 1:N 관계와 유사하지만, 1:N관계는 서로 다른 테이블의 관계를 나타낼 때만 사용하는 표현 방법이다.
